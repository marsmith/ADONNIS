<!DOCTYPE html>
<html>
  <head>
    <meta name="author" content="Ian Scilipoti - USGS NY WSC">
	<link rel="copyright" href="license.txt">
    <title>ADONNIS (Beta)</title>
    <meta http-equiv="content-type" content="text/html; utf-8"/>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
  <body>
    
    <div id="top-menu">
        <div id="mobile-main-menu">
            <span class="fa fa-bars" ></span>
        </div>
        <div class="title">
            <a class='top-menu-brand d-none d-md-block float-left' href="https://www.usgs.gov"><img src="images/logo.png"></a>
            
            <span class="app-name">ADONNIS (Beta)</span>
            <span class="app-name-mobile">ADONNIS (Beta)</span> 
        </div>

        <button id="aboutButton" class="btn btn-default top-menu-btn pull-right">
            <i class="fa fa-info"></i><span class="d-none d-md-inline">&nbsp;&nbsp;About</span>
        </button>
    </div>

    <div id="main-menu">
        <div class="main-menu-container scrollable">
            <div class="menu-content"> 
                <div class="scrollable-content">

                    <div class="accordion" id="accordion">
                        <div class="card mb-0 sidebar-panel">

                            <div class="card-header" data-toggle="collapse" data-parent="#accordion" href="#explanationPanel">
                                <a class="card-title" >
                                    ADONNIS
                                </a>
                            </div>

                            
                            <div id="explanationPanel" class="card-body collapse show" data-parent="#accordion">
                                <div class="card-body">
                                    <div class="alert alert-info" role="alert" id="initialAdvice">
                                        Click a point on the map or enter a lat/long to start the process. <br>
                                        Lat/long values are expected in decimal degrees. <br>
                                        Once a point has been entered and the location confirmed on the map, a response could take up to a few minutes.
                                    </div>

                                    <container>
                                        <div class="row">
                                            <div class="col-9">
                                                <form>
                                                    <div class="row">
                                                        <div class="col">
                                                            <input type="text" class="form-control" placeholder="Latitude" id="latitude">
                                                        </div>
                                                        <div class="col">
                                                            <input type="text" class="form-control" placeholder="Longitude" id="longitude">
                                                        </div>
                                                        <div class="col">
                                                            <button class="btn btn-info" id="enterLatLng" type="button">
                                                                Go!
                                                            </button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="col">
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-secondary" id="getShareLink">
                                                        <i class="fa fa-share"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-secondary" id="reloadButton">
                                                        <i class="fa fa-redo"></i>
                                                    </button>
                                                </div>
                                            </div>
                                           
                                        </div>
                                    </container>
                                    <br>

                                    <div class="row" id="loading">
                                        <div class="col-6 mx-auto">
                                            <div class="text-center">
                                                <i class="fa fa-cog fa-spin fa-3x"></i>
                                                <span class="mt-2">Loading...</span>
                                            </div>
                                        </div>
                                    </div>

                                    <br>

                                    <div id="frontEndFailure">
                                        <div class="alert alert-warning">
                                            Could not connect to NHD server. Please try again. 
                                        </div>
                                    </div>

                                    <div id="adonnisResults">
                                        <div class="alert alert-danger" id="highPriorityWarnings">
                                            HIGH PRIORITY WARNINGS FOUND
                                        </div>
    
                                        <div class="alert alert-warning" id="mediumPriorityWarnings">
                                            Medium priority warnings found
                                        </div>

                                        <button class="btn btn-block btn-link card-title border dropdown-toggle text-reset" data-toggle="collapse" data-target="#siteIdDispCollapse" aria-expanded="true" aria-controls="siteIdDispCollapse">
                                            Site ID
                                        </button>
                                        <div class="collapse show px-3" id="siteIdDispCollapse">
                                            <div id="siteIdDisp">
                                            </div>

                                            <div class="alert alert-secondary " role="alert" id="storyDisp">
                                                
                                            </div>
                                        </div>

                                        <div id = "alternateResults">
                                            <button class="btn btn-block btn-link card-title border dropdown-toggle text-reset" data-toggle="collapse" data-target="#siteIdDispCollapseAlt" aria-expanded="true" aria-controls="siteIdDispCollapseAlt">
                                                Site ID (ignoring incorrect sites)
                                            </button>
                                            <div class="collapse show px-3" id="siteIdDispCollapseAlt">
                                                <p class="font-italic">*Note that some "incorrect sites" may in fact be correct and only flagged due to an error in NHD Plus. Using the site ID below should only be done after verification.</p>
                                                <div id="siteIdDispAlt">
                                                </div>

                                                <div class="alert alert-secondary " role="alert" id="storyDispAlt">
                                                    
                                                </div>
                                            </div>
                                        </div>
                                        

                                        <button class="btn btn-block btn-link card-title border dropdown-toggle text-reset" data-toggle="collapse" data-target="#namesDispCollapse" aria-expanded="true" aria-controls="namesDispCollapse">
                                            Possible Names 
                                        </button>
                                        <div class="collapse px-3" id="namesDispCollapse">
                                            <div id="namesDisp">

                                            </div>
                                        </div>

                                        <button class="btn btn-block btn-link card-title border dropdown-toggle text-reset" data-toggle="collapse" data-target="#warningDispCollapse" aria-expanded="false" aria-controls="warningDispCollapse">
                                            Warnings 
                                        </button>
                                        <div class="collapse px-3" id="warningDispCollapse">
                                            <div id="warningsDisp">
                                                <div class="alert alert-success">
                                                    No warnings!
                                                </div>
                                            </div>
                                        </div>                 
  
                                    </div>
                                </div>
                            </div>

                            <div class="card-header collapsed" data-toggle="collapse" data-parent="#accordion" href="#basemapsPanel">
                                <a class="card-title" >
                                    Basemaps
                                </a>
                            </div>

                            <div id="basemapsPanel" class="card-body collapse" data-parent="#accordion">
                                <button id="btnStreets" class="btn btn-default slick-btn basemapBtn equalize"><img class="basemapThumb" alt="" src="images/streets.jpg"><br class="basemapThumb">Streets</button>
                                <button id="btnSatellite" class="btn btn-default slick-btn basemapBtn equalize" ><img class="basemapThumb" alt="" src="images/imagery.jpg"><br class="basemapThumb">Imagery</button>
                                <button id="btnImageryClarity" class="btn btn-default slick-btn basemapBtn equalize " ><img class="basemapThumb" alt="" src="images/imagery_clarity.jpg"><br class="basemapThumb">Imagery Clarity</button>
                                <button id="btnTopo" class="btn btn-default slick-btn basemapBtn equalize"><img class="basemapThumb" alt="" src="images/topo.jpg"><br class="basemapThumb">Topo</button>
                                <button id="btnTerrain" class="btn btn-default slick-btn basemapBtn equalize"><img class="basemapThumb" alt="" src="images/terrain.jpg"><br class="basemapThumb">Terrain</button>
                                <button id="btnGray" class="btn btn-default slick-btn basemapBtn equalize " ><img class="basemapThumb" alt="" src="images/gray.jpg"><br class="basemapThumb">Gray</button>
                                <button id="btnDarkGray" class="btn btn-default slick-btn basemapBtn equalize" ><img class="basemapThumb" alt="" src="images/darkgray.jpg"><br class="basemapThumb">DarkGray</button>
                                <button id="btnNatGeo" class="btn btn-default slick-btn basemapBtn equalize slick-btn-selection"><img class="basemapThumb" alt="" src="images/natgeo.jpg"><br class="basemapThumb">NatGeo</button>
                            </div>

                        </div>
                    </div>
                    <div id="main-menu-footer">
                        <div id="info" class="identification">Developed by USGS NY WSC</div>

                        <div class="footer-links">
                            <!-- footer nav links -->
                            <a href="https://www.doi.gov/privacy">DOI Privacy Policy</a>
                            <a href="https://www.usgs.gov/laws/policies_notices.html">Legal</a>
                            <a href="https://www2.usgs.gov/laws/accessibility.html">Accessibility</a>
                            <a href="https://www.usgs.gov/sitemap.html">Site Map</a>
                            <a href="https://answers.usgs.gov/">Contact USGS</a>
                            <!--/ footer nav links -->
                        </div>

                        <div class="footer-links">
                            <!-- footer nav links -->
                            <a href="https://www.doi.gov/">U.S. Department of the Interior</a>
                            <a href="https://www.doioig.gov/">DOI Inspector General</a>
                            <a href="https://www.whitehouse.gov/">White House</a>
                            <a href="https://www.whitehouse.gov/omb/management/egov/">E-gov</a>
                            <a href="https://www.doi.gov/pmb/eeo/no-fear-act">No Fear Act</a>
                            <a href="https://www2.usgs.gov/foia">FOIA</a>
                            <!--/ footer nav links -->
                        </div>

                        <!-- .footer-social-links -->
                        <div class="footer-icons">
                            <a href="https://twitter.com/usgs" target="_blank">
                                <i class="fab fa-twitter-square"></i>
                            </a>
                            <a href="https://facebook.com/usgeologicalsurvey" target="_blank">
                                <i class="fab fa-facebook-square"></i>
                            </a>
                            <a href="https://plus.google.com/112624925658443863798/posts" target="_blank">
                                <i class="fab fa-google-plus-square"></i>
                            </a>
                            <a href="https://github.com/usgs" target="_blank">
                                <i class="fab fa-github-square"></i>
                            </a>
                            <a href="https://flickr.com/usgeologicalsurvey" target="_blank">
                                <i class="fab fa-flickr"></i>
                            </a>
                            <a href="http://youtube.com/usgs" target="_blank">
                                <i class="fab fa-youtube-square"></i>
                            </a>
                            <a href="https://instagram.com/usgs" target="_blank">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="sharableLinkModal" class="modal fade"  tabindex="-1" role="dialog" >
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Shareable Link</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="aboutModalBody" class="modal-body">
                    <a href="https://ny.water.usgs.gov/maps/adonnis/" id="sharableLink"> https://ny.water.usgs.gov/maps/adonnis/ </a>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Dismiss</button>
                </div>
            </div>
        </div>
    </div>
    <div id="aboutModal" class="modal fade"  tabindex="-1" role="dialog" >
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ADONNIS</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="aboutModalBody" class="modal-body" style="height: 400px; overflow-y: auto;">
                    <ul class="nav nav-tabs" id="aboutModalTabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="aboutTab" href="#aboutTabPane" data-toggle="tab" role="tab"><i class="fa fa-question-circle"></i>&nbsp;About the application</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="guideTab" href="#guideTabPane" data-toggle="tab" role="tab"><i class="fa fa-info-circle"></i>&nbsp;User Guide</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="disclaimerTab" href="#disclaimerTabPane" data-toggle="tab" role="tab"><i class="fa fa-exclamation-circle"></i>&nbsp;Disclaimer</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="aboutTabPane"><br>

                            <div class="alert alert-info" role="alert">
                                All data is provisional unless otherwise noted
                            </div>

                            <p>This program is in development. Results should be verified by an expert in all cases.</p>

                            <a href="../docs/_build/html/index.html"> See the code documentation. </a>
                            
                            <br>

                            <p>Developed by Ian Scilipoti of the <a href="https://ny.water.usgs.gov">USGS New York Water Science Center</a>
                            <p>Icons from <a href="https://github.com/USGS-WiM/marker-creator">Marker Creator</a> developed by<a href="https://wim.usgs.gov"> USGS Web Informatics and Mapping</a><br><br>
                            <!-- Source code available <a href="https://github.com/marsmith/go2mapper">here.</a></p> -->
                            <span id="appVersion"></span>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="guideTabPane"><br>
                            <h3> Getting Started </h3>    

                            <p> Begin by selecting a point on the map or entering a lat/lng in decimal degrees. The new site cursor will appear on the map in the location. Depending on how fast the NHD Plus HR server responds, blue lines may appear which highlight the streams around the lat/lng of the new site cursor. </p>

                            <p> Next, you will be asked to confirm the location of the new site. Note that behind the scenes, the location of the new site will be snapped to the nearest stream found in the NHD Plus HR dataset. </p>

                            <p> Once the point is confirmed you will see loading animation while the server processes this request. Getting a new site ID requires the automated querying of a lot of data in addition to complex algorithms to process said data. <b> This could take up to a few minutes! </b> </p>

                            <p> Given a successful response, you will see a series of foldout tabs appear under the ADONNIS tab on the left. </p>

                            <h3> Interpreting Results </h3>

                            <p> Below is a description of the data that can be found under each tab of the results. </p>

                            <h4> <b> SITE ID </b> </h4>

                            <p> The site ID tab contains multiple pieces of information. Most importantly, the recommended ID is shown. The recommended ID will be in a box that may be green, yellow, or red. The color of the box indicates if the process went smoothly, contained warnings, or reached a high priority warning, respectively. More information about warnings and their meanings can be found below.</p>

                            <p> Beneath the site ID, a grey box is shown. This contains a simple discription of the process that was used to generate the new ID. This process information can be used to confirm results if desired. </p>

                            <h4> <b> SITE ID (Ignoring Incorrect Sites)</b> </h4>

                            <p> This tab only appears when there are high priority warnings. The information displayed here is in the same format as the normal site ID tab. However, the site ID and story are based on a site ID calculations that ignores all preexisting sites that are deemed responsible for high priority warnings. </p>

                            <p> In cases of high priority warnings it is recommended that the results from ADONNIS are verified. The secondary site ID displayed here may be seen as a better option in cases when many high priority warnings are found. </p>

                            <h4> <b> Possible Names</b> </h4>

                            <p> A list of possible names for the new site. Site names should be verified for uniqueness / shortened if necessary. The generated site names are based on the site naming convention. Road-river crossings tributary names are used as context to provide unique names. Names are listed in order of simplicity and ascending distance to the contextual reference. </p>
                        
                            <h4> <b> Warnings</b> </h4>

                            <p> Here, a list of warnings that occured during the site ID generation. Much of the time, these errors concern conflicts in existing site ID numbers. </p>

                            <p> ADONNIS is smart enough to make guesses regarding which sites may be the source of site ID numbering problems. Many warnings will point to a specific site that appears to be conflicting with many other sites. <p>

                            <div class="alert alert-danger"> The ability for ADONNIS to understand site ID inconsistencies is contingent on the data provided by NHD Plus HR. Site IDs are based on a specific network traversal which depends on what streams are considered streams vs main branches. Thus, if NHD Plus HR has incorrect data, it can lead ADONNIS to show a warning when there may not be a real issue. It is suggested in this case that inconsistancies are taken up with the maintainers of NHD Plus. </div>

                            <p> The above issue can be verified using the color coded stream data displayed on the map when results come in. Ensure that the stream levels is consistent with the general understanding of the stream structure of the area. </p>   
                        
                            <h3> Tips and Tricks </h3>

                            <p> Site IDs can be highlighted on the map by hovering over the site ID links seen in stories and results tabs. </p>

                            <p> Certain warnings have a button "Go" attached. This can be clicked to zoom to a view containing all implicated sites. </p>

                            <p> The color coded streams displayed with the results can be hovered over to see a tooltip containing stream names. </p> 
                        </div>
                        <div role="tabpanel" class="tab-pane" id="disclaimerTabPane"><br>
                            <h4>USGS Software User Rights Notice</h4>
                            <p>Software and related material (data and (or) documentation), contained in or furnished in connection with a software distribution, are made available by the U.S. Geological Survey (USGS) to be used in the public interest and in the advancement of science, subject to the following restrictions and understandings.</p>
                                
                            <p>Because the software and related material are free and provided "as is," the authors, the USGS, and the United States Government have made no warranty, express or implied, as to accuracy or completeness and are not obligated to provide the user with any support, consulting, training or assistance of any kind with regard to the use, operation, and performance of this software nor to provide the user with any updates, revisions, new versions or "bug fixes".</p>
                                
                            <p>The user assumes all risk for any damages whatsoever resulting from loss of use, data, or profits arising in connection with the access, use, quality, or performance of this software.</p>	
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
        </div> <!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div id="mapDiv">
    </div>

  </body>
</html>